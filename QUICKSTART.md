# 快速使用指南 - 知识网络图功能

## 🎯 快速开始

### 1. 启动应用
```bash
python app.py
```
访问: http://127.0.0.1:5000

### 2. 查看知识网络图

#### 步骤：
1. **选择分类** → 点击左侧导航栏中的任意大类（如 Animal 动物）
2. **选择子类** → 展开后点击小类（如 Bird name 鸟名）
3. **选择知识元** → 在列表页点击任意项目卡片
4. **查看详情** → 进入详情页后向下滚动

#### 在详情页你会看到：

**顶部区域**：
- ✅ 图片展示
- ✅ 章节信息（如《中山經》）
- ✅ 原文段落（楷体显示）
- ✅ 多次出现列表（如果有多个出处）

**中部区域**：
- ✅ 英文描述（Prompt Translation）
- ✅ 中文原始 Prompt
- ✅ 其他详细信息表格

**底部区域**（新增）：
- ✅ **Knowledge Network** 交互式网络图
  - 红色中心节点 = 当前知识元
  - 蓝色周围节点 = 相关实体
  - 连线标签 = 关系类型
  - 支持拖拽、缩放、悬停查看

## 📊 网络图交互功能

### 鼠标操作
- **悬停**: 查看节点名称
- **滚轮**: 放大/缩小
- **拖拽**: 移动视图
- **点击图例**: 显示/隐藏节点类型

### 关系类型示例
- `居住` - 栖息地关系
- `流出` - 水源关系
- `治疗` - 药用关系
- `生长` - 生长地关系
- `包含` - 包含关系
- `状如` - 形态相似

## 🎨 推荐查看项目

### 有丰富网络关系的知识元：

1. **甘棗之山** (Toponym > Mountain name)
   - 关系数量: 10+
   - 包含水系、动植物、疾病等多种关系

2. **𤠢鼠** (Animal > Beast name)
   - 与多个山系和植物有关联
   - 展示"状如"、"居住"等关系

3. **共水** (Toponym > Water name)
   - 河流关系网络
   - "流出"、"流注"关系类型

4. **蘀** (Plant > Grass name)
   - 植物与疾病的治疗关系
   - 展示药用关系网络

## 🔍 查看原文的方法

### 单一出处
如果知识元只在一个章节出现，原文会直接显示在章节信息下方的白色文本框中。

### 多次出现
如果知识元在多个章节出现，会显示"All Occurrences"列表：
- 每个条目显示章节名和对应原文
- 列表可滚动查看
- 条目按出现顺序排列

## 💡 技巧提示

1. **响应式设计**: 
   - 桌面端双栏布局
   - 移动端自动切换单栏
   - 网络图自适应容器大小

2. **数据来源**: 
   - 所有关系数据来自 `shanhaijing_cooccurrence_expanded_result.csv`
   - 自动过滤"无关"关系，只展示有意义连接

3. **性能优化**:
   - CSV 数据在启动时加载一次
   - 网络图按需生成
   - 图表使用 CDN 加载

## ❓ 常见问题

### Q: 为什么有些知识元没有网络图？
A: 该知识元可能不在共现数据 CSV 中，或者所有关系都是"无关"。

### Q: 网络图显示空白？
A: 检查浏览器控制台是否有 JavaScript 错误，确保 Plotly CDN 可访问。

### Q: 如何导出网络图？
A: 悬停在图表右上角会出现工具栏，点击相机图标可下载 PNG。

### Q: 图片仍不显示？
A: 已修复路径问题，确保 `images/` 文件夹存在且包含对应图片。

## 📝 已解决的问题

✅ **图片路径问题**: Windows 反斜杠已转换为 Web 正斜杠  
✅ **网络图响应式**: 自动适配不同屏幕尺寸  
✅ **原文显示**: 楷体渲染，提升阅读体验  
✅ **多处出现**: 列表式展示所有章节引用  

---

**享受探索《山海经》知识网络！** 🗺️✨
